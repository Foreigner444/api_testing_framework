# 4.8 Localization and Providers

## A. Concept Overview

### What & Why
APIs serve global users, so your tests need international data. Faker supports **70+ locales** (languages/regions), generating culturally appropriate names, addresses, phone numbers, and more. Localization ensures your tests cover edge cases from different countries and character sets.

### Analogy
Think of Faker locales like **international actors for a movie**.

For a movie set in different countries, you need:
- **American actors** for US scenes â†’ `Faker('en_US')`
- **French actors** for Paris scenes â†’ `Faker('fr_FR')`
- **Japanese actors** for Tokyo scenes â†’ `Faker('ja_JP')`

Each locale provides authentic, culturally appropriate data for realistic testing!

---

## B. Code Implementation

### File Path: `examples/localization.py`

```python
"""Comprehensive examples for localization."""
from faker import Faker

print("=" * 70)
print("LOCALIZATION - COMPREHENSIVE GUIDE")
print("=" * 70)

# ==================== DEFAULT (US) ====================
print("\nğŸ‡ºğŸ‡¸ US ENGLISH (default):")
fake_us = Faker('en_US')
print(f"Name: {fake_us.name()}")
print(f"Address: {fake_us.address()}")
print(f"Phone: {fake_us.phone_number()}")

# ==================== FRENCH ====================
print("\nğŸ‡«ğŸ‡· FRENCH:")
fake_fr = Faker('fr_FR')
print(f"Name: {fake_fr.name()}")
print(f"Address: {fake_fr.address()}")
print(f"Phone: {fake_fr.phone_number()}")

# ==================== GERMAN ====================
print("\nğŸ‡©ğŸ‡ª GERMAN:")
fake_de = Faker('de_DE')
print(f"Name: {fake_de.name()}")
print(f"Address: {fake_de.address()}")
print(f"Phone: {fake_de.phone_number()}")

# ==================== JAPANESE ====================
print("\nğŸ‡¯ğŸ‡µ JAPANESE:")
fake_jp = Faker('ja_JP')
print(f"Name: {fake_jp.name()}")
print(f"Address: {fake_jp.address()}")
print(f"Phone: {fake_jp.phone_number()}")

# ==================== SPANISH ====================
print("\nğŸ‡ªğŸ‡¸ SPANISH:")
fake_es = Faker('es_ES')
print(f"Name: {fake_es.name()}")
print(f"Address: {fake_es.address()}")
print(f"Phone: {fake_es.phone_number()}")

# ==================== MULTIPLE LOCALES ====================
print("\nğŸŒ MULTIPLE LOCALES:")
locales = ['en_US', 'fr_FR', 'de_DE', 'es_ES', 'it_IT']
for locale in locales:
    fake_locale = Faker(locale)
    print(f"{locale}: {fake_locale.name()}")

# ==================== MULTIPLE LOCALE INSTANCE ====================
print("\nğŸŒ COMBINED LOCALES:")
fake_multi = Faker(['en_US', 'fr_FR', 'de_DE'])
print("Random from multiple locales:")
for i in range(5):
    print(f"  {i+1}. {fake_multi.name()}")

print("\n" + "=" * 70)
```

---

### File Path: `tests/test_localization.py`

```python
"""Tests for localization features."""
import pytest
from faker import Faker


def test_default_locale():
    """Test default US English locale."""
    fake = Faker()  # Defaults to en_US
    
    name = fake.name()
    
    # Should generate valid name
    assert isinstance(name, str)
    assert len(name) > 0
    
    print(f"âœ… Default (US): {name}")


def test_us_locale():
    """Test explicit US locale."""
    fake = Faker('en_US')
    
    name = fake.name()
    state = fake.state()
    phone = fake.phone_number()
    
    # US specific data
    assert isinstance(name, str)
    assert isinstance(state, str)
    
    print(f"âœ… US locale: {name} from {state}")


def test_french_locale():
    """Test French locale."""
    fake = Faker('fr_FR')
    
    name = fake.name()
    city = fake.city()
    
    # French names might have accents
    assert isinstance(name, str)
    assert len(name) > 0
    
    print(f"âœ… French locale: {name} from {city}")


def test_german_locale():
    """Test German locale."""
    fake = Faker('de_DE')
    
    name = fake.name()
    city = fake.city()
    
    # German data
    assert isinstance(name, str)
    assert isinstance(city, str)
    
    print(f"âœ… German locale: {name} from {city}")


def test_japanese_locale():
    """Test Japanese locale."""
    fake = Faker('ja_JP')
    
    name = fake.name()
    address = fake.address()
    
    # Japanese data (might include Kanji characters)
    assert isinstance(name, str)
    assert len(name) > 0
    
    print(f"âœ… Japanese locale: {name}")


def test_spanish_locale():
    """Test Spanish locale."""
    fake = Faker('es_ES')
    
    name = fake.name()
    city = fake.city()
    
    # Spanish data
    assert isinstance(name, str)
    assert isinstance(city, str)
    
    print(f"âœ… Spanish locale: {name} from {city}")


def test_italian_locale():
    """Test Italian locale."""
    fake = Faker('it_IT')
    
    name = fake.name()
    city = fake.city()
    
    assert isinstance(name, str)
    assert isinstance(city, str)
    
    print(f"âœ… Italian locale: {name} from {city}")


def test_multiple_locales_combined():
    """Test combining multiple locales."""
    # Creates faker that randomly picks from locales
    fake = Faker(['en_US', 'fr_FR', 'de_DE'])
    
    names = [fake.name() for _ in range(10)]
    
    # All should be valid
    assert all(isinstance(n, str) and len(n) > 0 for n in names)
    
    # Should have variety from different locales
    assert len(names) == 10
    
    print(f"âœ… Multi-locale faker!")
    for i, name in enumerate(names, 1):
        print(f"   {i}. {name}")


def test_locale_specific_data():
    """Test that locales provide region-specific data."""
    fake_us = Faker('en_US')
    fake_uk = Faker('en_GB')
    
    # Both are English but different regions
    us_postcode = fake_us.postcode()
    uk_postcode = fake_uk.postcode()
    
    # US zipcodes are typically 5 or 9 digits
    # UK postcodes have letters
    
    assert isinstance(us_postcode, str)
    assert isinstance(uk_postcode, str)
    
    print(f"âœ… Locale-specific data!")
    print(f"   US postcode: {us_postcode}")
    print(f"   UK postcode: {uk_postcode}")


def test_international_phone_numbers():
    """Test international phone number formats."""
    locales = {
        'en_US': Faker('en_US'),
        'fr_FR': Faker('fr_FR'),
        'de_DE': Faker('de_DE'),
        'ja_JP': Faker('ja_JP')
    }
    
    print(f"âœ… International phone numbers:")
    for locale_code, fake in locales.items():
        phone = fake.phone_number()
        print(f"   {locale_code}: {phone}")


def test_international_addresses():
    """Test international address formats."""
    locales = {
        'US': Faker('en_US'),
        'France': Faker('fr_FR'),
        'Germany': Faker('de_DE'),
        'Japan': Faker('ja_JP')
    }
    
    print(f"âœ… International addresses:")
    for country, fake in locales.items():
        address = fake.address()
        print(f"   {country}: {address.split(chr(10))[0]}")  # First line only


def test_available_locales():
    """Test checking available locales."""
    # Get available locales
    available = Faker._get_faker_locales()
    
    # Should have many locales
    assert len(available) > 50
    
    # Common locales should be available
    assert 'en_US' in available
    assert 'fr_FR' in available
    assert 'de_DE' in available
    
    print(f"âœ… Available locales: {len(available)}")
    print(f"   Sample: {list(available)[:10]}")


# ==================== PRACTICAL MULTI-LOCALE TESTING ====================

def test_global_user_base():
    """Test generating users from different countries."""
    locales = {
        'USA': Faker('en_US'),
        'France': Faker('fr_FR'),
        'Germany': Faker('de_DE'),
        'Spain': Faker('es_ES'),
        'Italy': Faker('it_IT')
    }
    
    users = []
    for country, fake in locales.items():
        user = {
            "country": country,
            "name": fake.name(),
            "email": fake.email(),
            "phone": fake.phone_number(),
            "city": fake.city()
        }
        users.append(user)
    
    assert len(users) == 5
    
    print(f"âœ… Global user base ({len(users)} countries):")
    for user in users:
        print(f"   {user['country']}: {user['name']} from {user['city']}")


def test_unicode_handling():
    """Test that unicode characters are handled correctly."""
    # Locales with unicode characters
    fake_fr = Faker('fr_FR')
    fake_de = Faker('de_DE')
    
    fr_name = fake_fr.name()
    de_name = fake_de.name()
    
    # Should be valid strings (might contain accents, umlauts)
    assert isinstance(fr_name, str)
    assert isinstance(de_name, str)
    
    print(f"âœ… Unicode handling:")
    print(f"   French: {fr_name}")
    print(f"   German: {de_name}")
```

---

## D. Connect & Apply

### How to Test It

```bash
python examples/localization.py
pytest tests/test_localization.py -v -s
```

### Expected Result

```
ğŸ‡ºğŸ‡¸ US ENGLISH:
Name: Jennifer Martinez
Address: 123 Main Street, Boston, MA 02101

ğŸ‡«ğŸ‡· FRENCH:
Name: Marie Dubois
Address: 45 rue de Rivoli, 75001 Paris

tests/test_localization.py::test_international_addresses PASSED
âœ… International addresses:
   US: 123 Oak Street
   France: 45 rue de la Paix
   Germany: HauptstraÃŸe 42

======================== 16 passed in 0.83s =========================
```

---

## E. Popular Locales

| Locale | Language | Region |
|--------|----------|--------|
| `en_US` | English | United States |
| `en_GB` | English | United Kingdom |
| `fr_FR` | French | France |
| `de_DE` | German | Germany |
| `es_ES` | Spanish | Spain |
| `it_IT` | Italian | Italy |
| `ja_JP` | Japanese | Japan |
| `zh_CN` | Chinese | China |
| `pt_BR` | Portuguese | Brazil |
| `ru_RU` | Russian | Russia |

---

## F. What You've Learned

âœ… Using different Faker locales  
âœ… Region-specific data generation  
âœ… International names and addresses  
âœ… Multi-locale phone numbers  
âœ… Combining multiple locales  
âœ… Unicode character handling  
âœ… Global user base testing  
âœ… Available locale discovery  

---

## G. What's Next?

In **Lesson 4.9 (Custom Faker Providers)**, we'll learn:
- Creating custom data generators
- Extending Faker with your own methods
- Domain-specific data generation

You can now test globally! ğŸŒ

---

**Ready for the next lesson?**
