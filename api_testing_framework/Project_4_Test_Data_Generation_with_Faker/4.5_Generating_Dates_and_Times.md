# 4.5 Generating Dates and Times

## A. Concept Overview

### What & Why
Dates and times are everywhere in APIs â€“ creation timestamps, birthdates, expiration dates, booking times. Faker provides powerful methods to generate dates in the past, future, within specific ranges, and in various formats. This is essential for testing date-sensitive features like age verification, scheduling, and historical data.

### Analogy
Think of Faker's date methods like **a time machine with presets**.

- `date_of_birth()` â†’ Travel back 18-90 years
- `date_this_year()` â†’ Stay in current year
- `future_date()` â†’ Jump ahead to the future
- `date_between()` â†’ Set custom time range

Each preset takes you exactly where you need to go for your test scenario!

---

## B. Code Implementation

### File Path: `examples/dates_times.py`

```python
"""Comprehensive examples for dates and times."""
from faker import Faker
from datetime import datetime, date, timedelta

fake = Faker()

print("=" * 70)
print("DATES AND TIMES - COMPREHENSIVE GUIDE")
print("=" * 70)

# ==================== BASIC DATES ====================
print("\nğŸ“… BASIC DATES:")
print(f"Date (string): {fake.date()}")
print(f"Date (object): {fake.date_object()}")
print(f"Date this year: {fake.date_this_year()}")
print(f"Date this month: {fake.date_this_month()}")
print(f"Date this decade: {fake.date_this_decade()}")
print(f"Date this century: {fake.date_this_century()}")

# ==================== DATES WITH CONSTRAINTS ====================
print("\nğŸ“… PAST AND FUTURE DATES:")
print(f"Past date: {fake.past_date()}")
print(f"Past date (30 days): {fake.past_date(start_date='-30d')}")
print(f"Future date: {fake.future_date()}")
print(f"Future date (30 days): {fake.future_date(end_date='+30d')}")

# ==================== DATE RANGES ====================
print("\nğŸ“… DATE RANGES:")
start_date = date(2024, 1, 1)
end_date = date(2024, 12, 31)
random_date = fake.date_between(start_date=start_date, end_date=end_date)
print(f"Date between {start_date} and {end_date}: {random_date}")

# ==================== BIRTHDAYS ====================
print("\nğŸ‚ BIRTHDAYS:")
print(f"Date of birth: {fake.date_of_birth()}")
print(f"DOB (age 18-65): {fake.date_of_birth(minimum_age=18, maximum_age=65)}")
print(f"DOB (age 13+): {fake.date_of_birth(minimum_age=13)}")
print(f"DOB (child): {fake.date_of_birth(maximum_age=12)}")

# ==================== TIMES ====================
print("\nâ° TIMES:")
print(f"Time (string): {fake.time()}")
print(f"Time (object): {fake.time_object()}")
print(f"AM/PM: {fake.am_pm()}")

# ==================== DATETIME ====================
print("\nğŸ“…â° DATETIME:")
print(f"DateTime: {fake.date_time()}")
print(f"DateTime this year: {fake.date_time_this_year()}")
print(f"DateTime this month: {fake.date_time_this_month()}")
print(f"Past datetime: {fake.past_datetime()}")
print(f"Future datetime: {fake.future_datetime()}")

# ==================== DATE BETWEEN ====================
print("\nğŸ“… DATE BETWEEN SPECIFIC DATES:")
start = date(2024, 1, 1)
end = date(2024, 6, 30)
between = fake.date_between(start_date=start, end_date=end)
print(f"Between {start} and {end}: {between}")

# ==================== TIMEZONE-AWARE ====================
print("\nğŸŒ TIMEZONE:")
print(f"Timezone: {fake.timezone()}")

# ==================== UNIX TIMESTAMP ====================
print("\nğŸ• UNIX TIME:")
print(f"Unix time: {fake.unix_time()}")

# ==================== ISO FORMAT ====================
print("\nğŸ“„ ISO FORMAT:")
print(f"ISO 8601: {fake.iso8601()}")

# ==================== YEAR, MONTH, DAY ====================
print("\nğŸ“Š COMPONENTS:")
print(f"Year: {fake.year()}")
print(f"Month: {fake.month()}")
print(f"Month name: {fake.month_name()}")
print(f"Day of week: {fake.day_of_week()}")
print(f"Day of month: {fake.day_of_month()}")

# ==================== CENTURY ====================
print("\nğŸ“œ CENTURY:")
print(f"Century: {fake.century()}")

print("\n" + "=" * 70)
```

---

### File Path: `tests/test_dates_times.py`

```python
"""Tests for date and time generation."""
import pytest
from faker import Faker
from datetime import date, datetime, time, timedelta


def test_basic_date_string():
    """Test basic date string generation."""
    fake = Faker()
    
    date_str = fake.date()
    
    # Should be in YYYY-MM-DD format
    assert isinstance(date_str, str)
    assert len(date_str) == 10
    assert date_str.count("-") == 2
    
    # Should be parseable
    parsed = datetime.strptime(date_str, "%Y-%m-%d").date()
    assert isinstance(parsed, date)
    
    print(f"âœ… Date string: {date_str}")


def test_date_object():
    """Test date object generation."""
    fake = Faker()
    
    date_obj = fake.date_object()
    
    # Should be a date object
    assert isinstance(date_obj, date)
    
    # Should be reasonable (not too far in past/future)
    today = date.today()
    years_diff = abs((today - date_obj).days / 365.25)
    assert years_diff < 200
    
    print(f"âœ… Date object: {date_obj}")


def test_date_this_year():
    """Test date within current year."""
    fake = Faker()
    
    date_obj = fake.date_this_year()
    current_year = datetime.now().year
    
    assert isinstance(date_obj, date)
    assert date_obj.year == current_year
    
    print(f"âœ… Date this year: {date_obj}")


def test_date_of_birth():
    """Test date of birth generation."""
    fake = Faker()
    
    dob = fake.date_of_birth()
    
    # Should be in the past
    assert dob < date.today()
    
    # Should be reasonable age
    age = (date.today() - dob).days / 365.25
    assert 0 < age < 120
    
    print(f"âœ… Date of birth: {dob} (age: {int(age)})")


def test_date_of_birth_with_age_range():
    """Test date of birth with age constraints."""
    fake = Faker()
    
    # Generate DOB for someone aged 25-35
    dob = fake.date_of_birth(minimum_age=25, maximum_age=35)
    
    # Calculate age
    today = date.today()
    age = today.year - dob.year - ((today.month, today.day) < (dob.month, dob.day))
    
    # Should be in range
    assert 25 <= age <= 35
    
    print(f"âœ… DOB with age range: {dob} (age: {age})")


def test_date_between():
    """Test date within specific range."""
    fake = Faker()
    
    start_date = date(2024, 1, 1)
    end_date = date(2024, 12, 31)
    
    random_date = fake.date_between(start_date=start_date, end_date=end_date)
    
    # Should be within range
    assert start_date <= random_date <= end_date
    
    print(f"âœ… Date between: {random_date} (within 2024)")


def test_past_date():
    """Test past date generation."""
    fake = Faker()
    
    past = fake.past_date()
    
    # Should be before today
    assert past < date.today()
    
    # Should be recent (default 30 days)
    days_ago = (date.today() - past).days
    assert days_ago <= 30
    
    print(f"âœ… Past date: {past} ({days_ago} days ago)")


def test_future_date():
    """Test future date generation."""
    fake = Faker()
    
    future = fake.future_date()
    
    # Should be after today
    assert future > date.today()
    
    # Should be soon (default 30 days)
    days_ahead = (future - date.today()).days
    assert days_ahead <= 30
    
    print(f"âœ… Future date: {future} ({days_ahead} days ahead)")


def test_time_generation():
    """Test time generation."""
    fake = Faker()
    
    time_str = fake.time()
    time_obj = fake.time_object()
    
    # String should be HH:MM:SS format
    assert isinstance(time_str, str)
    assert time_str.count(":") == 2
    
    # Object should be time type
    assert isinstance(time_obj, time)
    
    print(f"âœ… Time generated!")
    print(f"   String: {time_str}")
    print(f"   Object: {time_obj}")


def test_datetime_generation():
    """Test datetime generation."""
    fake = Faker()
    
    dt = fake.date_time()
    
    # Should be datetime object
    assert isinstance(dt, datetime)
    
    print(f"âœ… DateTime: {dt}")


def test_datetime_this_year():
    """Test datetime within current year."""
    fake = Faker()
    
    dt = fake.date_time_this_year()
    current_year = datetime.now().year
    
    assert dt.year == current_year
    
    print(f"âœ… DateTime this year: {dt}")


def test_past_datetime():
    """Test past datetime generation."""
    fake = Faker()
    
    past_dt = fake.past_datetime()
    
    # Should be before now
    assert past_dt < datetime.now()
    
    print(f"âœ… Past datetime: {past_dt}")


def test_future_datetime():
    """Test future datetime generation."""
    fake = Faker()
    
    future_dt = fake.future_datetime()
    
    # Should be after now
    assert future_dt > datetime.now()
    
    print(f"âœ… Future datetime: {future_dt}")


def test_unix_time():
    """Test Unix timestamp generation."""
    fake = Faker()
    
    unix_ts = fake.unix_time()
    
    # Should be an integer
    assert isinstance(unix_ts, int)
    
    # Should be positive and reasonable
    assert unix_ts > 0
    
    # Convert to datetime
    dt = datetime.fromtimestamp(unix_ts)
    assert isinstance(dt, datetime)
    
    print(f"âœ… Unix time: {unix_ts} â†’ {dt}")


def test_iso8601():
    """Test ISO 8601 format generation."""
    fake = Faker()
    
    iso_str = fake.iso8601()
    
    # Should be a string
    assert isinstance(iso_str, str)
    
    # Should contain T separator
    assert "T" in iso_str
    
    print(f"âœ… ISO 8601: {iso_str}")


def test_timezone():
    """Test timezone generation."""
    fake = Faker()
    
    tz = fake.timezone()
    
    # Should be a valid timezone string
    assert isinstance(tz, str)
    assert len(tz) > 0
    
    # Common timezones contain /
    # Example: "America/New_York"
    
    print(f"âœ… Timezone: {tz}")


# ==================== PRACTICAL USE CASES ====================

def test_event_date_range():
    """Test generating event dates."""
    fake = Faker()
    
    # Event in next 90 days
    event_date = fake.future_date(end_date="+90d")
    
    # Registration closes 7 days before
    registration_close = event_date - timedelta(days=7)
    
    # Registration opens 60 days before
    registration_open = event_date - timedelta(days=60)
    
    assert registration_open < registration_close < event_date
    
    print(f"âœ… Event dates generated!")
    print(f"   Event date: {event_date}")
    print(f"   Registration: {registration_open} to {registration_close}")


def test_user_timestamps():
    """Test generating user account timestamps."""
    fake = Faker()
    
    # Account created in past year
    created_at = fake.date_time_this_year()
    
    # Last login more recent
    last_login = fake.date_time_between(
        start_date=created_at,
        end_date=datetime.now()
    )
    
    # Updated at same or after last login
    updated_at = fake.date_time_between(
        start_date=last_login,
        end_date=datetime.now()
    )
    
    assert created_at <= last_login <= updated_at
    
    print(f"âœ… User timestamps!")
    print(f"   Created: {created_at}")
    print(f"   Last login: {last_login}")
    print(f"   Updated: {updated_at}")


def test_date_formats():
    """Test various date format methods."""
    fake = Faker()
    
    formats = {
        "Standard date": fake.date(),
        "ISO 8601": fake.iso8601(),
        "Unix time": str(fake.unix_time()),
        "Year": fake.year(),
        "Month": fake.month(),
        "Day": fake.day_of_month()
    }
    
    for format_name, value in formats.items():
        assert value is not None
        print(f"   {format_name}: {value}")
    
    print(f"âœ… All date formats work!")


def test_age_calculation():
    """Test calculating age from DOB."""
    fake = Faker()
    
    dob = fake.date_of_birth(minimum_age=21, maximum_age=30)
    
    # Calculate age
    today = date.today()
    age = today.year - dob.year - ((today.month, today.day) < (dob.month, dob.day))
    
    assert 21 <= age <= 30
    
    print(f"âœ… Age calculation: DOB {dob} = {age} years old")


def test_subscription_dates():
    """Test generating subscription dates."""
    fake = Faker()
    
    # Subscription started in past
    start_date = fake.past_date(start_date="-365d")
    
    # Subscription expires in future (1 year subscription)
    end_date = start_date + timedelta(days=365)
    
    # Current date should be between start and end for active subscription
    today = date.today()
    
    assert start_date < today
    
    print(f"âœ… Subscription dates!")
    print(f"   Start: {start_date}")
    print(f"   End: {end_date}")
    print(f"   Days remaining: {(end_date - today).days}")
```

---

## C. Connect & Apply

### How to Test It

```bash
# Run example
python examples/dates_times.py

# Run tests
pytest tests/test_dates_times.py -v -s
```

### Expected Result

```
ğŸ“… BASIC DATES:
Date (string): 2024-05-15
Date (object): 2024-03-22
Date this year: 2024-11-10

tests/test_dates_times.py::test_basic_date_string PASSED
âœ… Date string: 2024-08-15

tests/test_dates_times.py::test_date_of_birth_with_age_range PASSED
âœ… DOB with age range: 1995-03-12 (age: 29)

======================== 19 passed in 0.67s =========================
```

---

## D. Quick Reference

### Common Date Methods

```python
fake = Faker()

# Basic dates
fake.date()                    # "2024-01-15"
fake.date_object()             # date(2024, 1, 15)
fake.date_this_year()          # Date in current year

# Birthdays
fake.date_of_birth()           # Random adult DOB
fake.date_of_birth(minimum_age=18, maximum_age=65)

# Past/Future
fake.past_date()               # Recent past (30 days)
fake.future_date()             # Near future (30 days)
fake.past_date(start_date='-1y')  # Past year

# Specific range
fake.date_between(start_date='2024-01-01', end_date='2024-12-31')

# Times
fake.time()                    # "14:30:00"
fake.time_object()             # time(14, 30, 0)

# DateTime
fake.date_time()               # Full datetime
fake.date_time_this_year()     # DateTime in current year
```

---

## E. What You've Learned

âœ… Generating date strings and objects  
âœ… Dates within specific periods (year, month, decade)  
âœ… Past and future dates  
âœ… Date ranges with constraints  
âœ… Birthdays with age ranges  
âœ… Time generation  
âœ… DateTime objects  
âœ… Unix timestamps and ISO 8601  
âœ… Timezones  
âœ… Date calculations for real scenarios  

---

## F. What's Next?

In **Lesson 4.6 (Generating Internet Data)**, we'll learn:
- URLs and domains
- IP addresses (IPv4, IPv6)
- User agents
- MAC addresses

Your time-traveling test data is ready! ğŸ‰

---

**Ready for the next lesson?**
