# Lesson 2.12: Async Timeouts and Retries

## A. Timeout Configuration

```python
@pytest.mark.asyncio
async def test_timeout_config():
    timeout = httpx.Timeout(
        connect=5.0,
        read=10.0,
        write=5.0,
        pool=5.0
    )
    
    async with httpx.AsyncClient(timeout=timeout) as client:
        response = await client.get("https://httpbin.org/delay/2")
        assert response.status_code == 200
```

---

## B. Retry Logic

```python
import asyncio

@pytest.mark.asyncio
async def test_with_retry(api_client):
    max_retries = 3
    
    for attempt in range(max_retries):
        try:
            response = await api_client.get("/users/1")
            assert response.status_code == 200
            break  # Success!
        except httpx.TimeoutException:
            if attempt == max_retries - 1:
                raise  # Last attempt failed
            await asyncio.sleep(1)  # Wait before retry
```

---

## C. Key Takeaways

ðŸ”‘ Configure timeouts per client or request  
ðŸ”‘ Implement retry logic for flaky endpoints  
ðŸ”‘ Use asyncio.sleep() for async delays  

Ready for 2.13? ðŸš€
