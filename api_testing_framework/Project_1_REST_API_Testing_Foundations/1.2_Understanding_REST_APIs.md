# Lesson 1.2: Understanding REST APIs

## A. Concept Overview

### What & Why
**REST (Representational State Transfer)** is an architectural style for designing APIs that uses standard HTTP methods and follows specific principles. It's important because 90%+ of modern web APIs are RESTful, making it the industry standard you need to master.

### Analogy
Think of REST like a well-organized library. Books (resources) are organized by categories (endpoints). You can CHECK OUT a book (GET), ADD a new book (POST), UPDATE book information (PUT), or REMOVE a book (DELETE). The library catalog (API documentation) tells you exactly where everything is and what operations you can perform. REST APIs follow similar predictable patterns.

---

## B. What is REST?

REST stands for **Representational State Transfer**. It's a set of guidelines for creating web services that are:
- Simple
- Scalable
- Stateless
- Cacheable
- Easy to understand and use

REST was defined by Roy Fielding in his PhD dissertation in 2000 and has become the dominant API design pattern.

---

## C. The Six Principles of REST

### 1. Client-Server Architecture
**What it means**: The client (your test/app) and server (API) are separate.  
**Why it matters**: They can evolve independently. Frontend can change without breaking backend.

**Example**: 
- Your mobile app (client) sends requests
- The server processes them
- They communicate only through the API interface

### 2. Stateless
**What it means**: Each request contains ALL the information needed. The server doesn't remember previous requests.  
**Why it matters**: Makes APIs scalable and reliable.

**Example**:
```
âŒ Bad (Stateful):
Request 1: Login with username/password â†’ Server remembers you
Request 2: Get profile â†’ Server knows who you are from Request 1

âœ… Good (Stateless):
Request 1: Login â†’ Server returns a token
Request 2: Get profile + include token â†’ Server knows who you are from the token
```

### 3. Cacheable
**What it means**: Responses can be cached to improve performance.  
**Why it matters**: Reduces server load and speeds up responses.

**Example**: Weather data that updates every hour can be cached.

### 4. Uniform Interface
**What it means**: Consistent, predictable patterns for all endpoints.  
**Why it matters**: Makes APIs easy to learn and use.

**Example**:
```
GET    /users      â†’ Get all users
GET    /users/123  â†’ Get user 123
POST   /users      â†’ Create new user
PUT    /users/123  â†’ Update user 123
DELETE /users/123  â†’ Delete user 123
```

### 5. Layered System
**What it means**: Client doesn't know if it's connected directly to the server or through intermediaries.  
**Why it matters**: Allows load balancers, caches, security layers without client changes.

### 6. Code on Demand (Optional)
**What it means**: Server can send executable code to client.  
**Why it matters**: Rarely used in modern REST APIs, safely ignorable for testing.

---

## D. Resources and Endpoints

### What is a Resource?
A **resource** is any object or data the API manages. Resources are the nouns of your API.

**Common Resources**:
- Users
- Products
- Orders
- Posts
- Comments
- Payments

### What is an Endpoint?
An **endpoint** is a URL where you can access a resource.

**Endpoint Structure**:
```
https://api.example.com/v1/users
â”‚                        â”‚  â”‚
â”‚                        â”‚  â””â”€ Resource
â”‚                        â””â”€â”€â”€â”€ API version
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Base URL
```

### Endpoint Examples

**User Resource**:
```
GET    /users           â†’ List all users
GET    /users/123       â†’ Get specific user
POST   /users           â†’ Create new user
PUT    /users/123       â†’ Replace user 123
PATCH  /users/123       â†’ Partially update user 123
DELETE /users/123       â†’ Delete user 123
```

**Nested Resources** (relationships):
```
GET    /users/123/posts        â†’ Get all posts by user 123
GET    /users/123/posts/456    â†’ Get specific post 456 by user 123
POST   /users/123/posts        â†’ Create new post for user 123
```

---

## E. HTTP Methods (Verbs)

REST uses standard HTTP methods to perform operations:

### GET - Retrieve Data
- **Purpose**: Get a resource or list of resources
- **Safe**: Yes (doesn't change data)
- **Idempotent**: Yes (same result every time)
- **Has Body**: No

**Examples**:
```
GET /users           â†’ Get all users
GET /users/123       â†’ Get user with ID 123
GET /users?age=25    â†’ Get users filtered by age
```

### POST - Create Data
- **Purpose**: Create a new resource
- **Safe**: No (changes data)
- **Idempotent**: No (creates new resource each time)
- **Has Body**: Yes (data for new resource)

**Example**:
```
POST /users
Body: {"name": "John", "email": "john@example.com"}
â†’ Creates new user, returns user with ID
```

### PUT - Replace Data
- **Purpose**: Replace entire resource
- **Safe**: No
- **Idempotent**: Yes (same result every time)
- **Has Body**: Yes (complete resource data)

**Example**:
```
PUT /users/123
Body: {"id": 123, "name": "John Updated", "email": "john@new.com"}
â†’ Replaces entire user 123
```

### PATCH - Partially Update Data
- **Purpose**: Update specific fields
- **Safe**: No
- **Idempotent**: Yes
- **Has Body**: Yes (only fields to update)

**Example**:
```
PATCH /users/123
Body: {"email": "newemail@example.com"}
â†’ Updates only email, keeps other fields
```

### DELETE - Remove Data
- **Purpose**: Delete a resource
- **Safe**: No
- **Idempotent**: Yes (deleting twice = same result)
- **Has Body**: Usually no

**Example**:
```
DELETE /users/123
â†’ Deletes user 123
```

---

## F. REST API Response Structure

A typical REST API response includes:

### Status Code
Indicates success or failure (we'll cover these in detail in lesson 1.4)

### Headers
Metadata about the response
```
Content-Type: application/json
Content-Length: 1234
Cache-Control: max-age=3600
```

### Body
The actual data (usually JSON)
```json
{
  "id": 123,
  "name": "John Doe",
  "email": "john@example.com",
  "created_at": "2024-01-15T10:30:00Z"
}
```

---

## G. JSON - The Language of REST

**JSON (JavaScript Object Notation)** is the most common data format for REST APIs.

### Why JSON?
- Human-readable
- Easy to parse
- Language-agnostic
- Compact

### JSON Structure

**Object** (key-value pairs):
```json
{
  "name": "John",
  "age": 30,
  "active": true
}
```

**Array** (list of values):
```json
["apple", "banana", "orange"]
```

**Nested Objects**:
```json
{
  "user": {
    "id": 123,
    "name": "John",
    "address": {
      "city": "New York",
      "country": "USA"
    }
  }
}
```

**Array of Objects**:
```json
[
  {"id": 1, "name": "John"},
  {"id": 2, "name": "Jane"},
  {"id": 3, "name": "Bob"}
]
```

---

## H. RESTful URL Design Best Practices

### âœ… Good REST URLs

```
GET    /users                  â†’ List users
GET    /users/123              â†’ Get user 123
POST   /users                  â†’ Create user
PUT    /users/123              â†’ Update user 123
DELETE /users/123              â†’ Delete user 123
GET    /users/123/orders       â†’ Get orders for user 123
GET    /products?category=electronics  â†’ Filter products
```

### âŒ Bad REST URLs

```
âŒ /getUsers                   â†’ Don't use verbs in URLs (use GET method)
âŒ /users/delete/123          â†’ Don't use verbs in URLs (use DELETE method)
âŒ /user                      â†’ Use plural nouns (/users)
âŒ /users/123/deleteOrder/456 â†’ Too deep, use verbs in path
```

### Key Rules:
1. **Use nouns, not verbs** - Methods (GET, POST) are the verbs
2. **Use plural nouns** - /users not /user
3. **Be consistent** - Pick a pattern and stick to it
4. **Use hyphens, not underscores** - /order-items not /order_items
5. **Keep it simple** - Avoid deep nesting (max 2-3 levels)
6. **Use query parameters for filtering** - /users?status=active

---

## I. Real-World REST API Example

Let's look at a complete example with a fictional **Blog API**:

### Available Endpoints:

**Posts**:
```
GET    /posts              â†’ List all posts
GET    /posts/1            â†’ Get post 1
POST   /posts              â†’ Create new post
PUT    /posts/1            â†’ Update post 1
PATCH  /posts/1            â†’ Partially update post 1
DELETE /posts/1            â†’ Delete post 1
GET    /posts?author=123   â†’ Filter posts by author
```

**Comments**:
```
GET    /posts/1/comments   â†’ Get comments for post 1
POST   /posts/1/comments   â†’ Add comment to post 1
DELETE /comments/456       â†’ Delete specific comment
```

**Example Request & Response**:

**Request**:
```http
GET /posts/1 HTTP/1.1
Host: api.blog.com
Accept: application/json
```

**Response**:
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 1,
  "title": "Understanding REST APIs",
  "content": "REST is an architectural style...",
  "author": {
    "id": 123,
    "name": "John Doe"
  },
  "published_at": "2024-01-15T10:30:00Z",
  "tags": ["api", "rest", "tutorial"]
}
```

---

## J. Common Stumbling Blocks

### Mistake 1: Confusing REST with HTTP
**The Error**: Thinking REST = HTTP  
**The Truth**: REST uses HTTP, but they're not the same. REST is a design pattern; HTTP is the protocol.

### Mistake 2: Putting Verbs in URLs
**Wrong**: `/deleteUser/123`  
**Right**: `DELETE /users/123`  
**Why**: The HTTP method IS the verb. URLs should only contain nouns (resources).

### Mistake 3: Not Understanding Idempotency
**Definition**: An operation is idempotent if calling it multiple times produces the same result.

**Examples**:
- `GET /users/123` - Idempotent (reading data doesn't change it)
- `PUT /users/123` - Idempotent (replacing with same data = same result)
- `DELETE /users/123` - Idempotent (deleting twice = still deleted)
- `POST /users` - NOT idempotent (creates new user each time)

---

## K. Key Takeaways

ğŸ”‘ **REST**: Architectural style using HTTP methods and resources  
ğŸ”‘ **Resource**: A noun (user, product, order)  
ğŸ”‘ **Endpoint**: URL where you access a resource  
ğŸ”‘ **HTTP Methods**: GET (read), POST (create), PUT (replace), PATCH (update), DELETE (remove)  
ğŸ”‘ **JSON**: Standard data format for REST APIs  
ğŸ”‘ **Stateless**: Each request is independent  
ğŸ”‘ **URLs**: Should contain nouns, not verbs  

---

## L. Quick Check: Do You Understand?

Before moving on, make sure you can answer these:

1. What does REST stand for?
2. What's the difference between a resource and an endpoint?
3. Which HTTP method would you use to create a new user?
4. Should REST API URLs contain verbs? Why or why not?
5. What format do most REST APIs use for data?

If you're unsure about any of these, let me know! I'm here to help.

---

## M. What's Next?

In **Lesson 1.3: HTTP Methods (GET, POST, PUT, DELETE)**, we'll do a deep dive into each HTTP method with specific examples, status codes, and what to test for each one.

You're building a solid foundation! Keep going! ğŸš€

**Ready for lesson 1.3, or do you want to discuss anything about REST APIs?**
