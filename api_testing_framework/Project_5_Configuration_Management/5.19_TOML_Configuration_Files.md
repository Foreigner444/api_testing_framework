# Lesson 5.19: TOML Configuration Files

## A. Concept Overview

### What & Why
**TOML** (Tom's Obvious Minimal Language) provides Python-friendly configuration format used by modern Python tools like pyproject.toml. Important for consistency with Python ecosystem tooling and human-readable config files.

### Analogy
TOML is like INI files evolved for modern useâ€”simple key=value pairs but with better support for complex data structures, widely adopted in Python projects.

---

## B. Code Implementation

```python
try:
    import tomllib  # Python 3.11+
except ImportError:
    import tomli as tomllib  # pip install tomli

from pathlib import Path
from pydantic_settings import BaseSettings


class Settings(BaseSettings):
    api_key: str
    database_url: str
    timeout: int = 30
    
    @classmethod
    def from_toml(cls, path: Path):
        with open(path, 'rb') as f:
            data = tomllib.load(f)
        return cls(**data)


# config.toml:
# api_key = "test_key_123"
# database_url = "postgresql://localhost/testdb"
# timeout = 45

settings = Settings.from_toml(Path("config.toml"))
```

---

## C. Connect & Apply

### How to Test It

```bash
cat > config.toml << 'EOF'
api_key = "test_key_123"
database_url = "postgresql://localhost/testdb"
timeout = 45

[database]
host = "localhost"
port = 5432
name = "testdb"
EOF

python -c "
from config.settings import Settings
s = Settings.from_toml(Path('config.toml'))
print(f'API Key: {s.api_key}')
print(f'Database: {s.database_url}')
"
```

### Expected Result

```
API Key: test_key_123
Database: postgresql://localhost/testdb
```

---

## D. Common Stumbling Blocks

### Mistake: Using wrong quotes

**Problem:** TOML requires double quotes for strings, not single quotes
**Fix:** Use `key = "value"` not `key = 'value'`

---

## ðŸŽ¯ Key Takeaways

âœ… **TOML** for Python-friendly configuration  
âœ… **tomllib** (3.11+) or **tomli** for parsing  
âœ… **Similar to INI** but more powerful  
âœ… **Used by pyproject.toml** and modern Python tools  

---

## What's Next?

Next: **Combining YAML and .env** - hybrid configuration approach!

**Ready to continue?** ðŸš€
