# Lesson 5.17: YAML Configuration Files

## A. Concept Overview

### What & Why
**YAML configuration files** provide human-readable, hierarchical configuration that's easier to edit than environment variables for complex, nested settings. Important for configuration that includes lists, nested objects, or multi-line values.

### Analogy
YAML is like an organized outline for an essay (hierarchical, indented, readable), while environment variables are like index cards (flat, one value per card). For simple notes, cards work; for complex structure, outlines shine.

---

## B. Code Implementation

```python
from pathlib import Path
from typing import List, Optional
from pydantic import Field
from pydantic_settings import BaseSettings
import yaml


class DatabaseConfig(BaseSettings):
    host: str
    port: int
    name: str


class Settings(BaseSettings):
    api_key: str
    database: DatabaseConfig
    allowed_hosts: List[str]
    feature_flags: dict
    
    @classmethod
    def from_yaml(cls, path: Path) -> "Settings":
        with open(path) as f:
            data = yaml.safe_load(f)
        return cls(**data)


# config.yaml:
# api_key: test_key
# database:
#   host: localhost
#   port: 5432
#   name: testdb
# allowed_hosts:
#   - localhost
#   - example.com
# feature_flags:
#   new_ui: true
#   beta_features: false

settings = Settings.from_yaml(Path("config.yaml"))
```

---

## C. Connect & Apply

### How to Test It

Create `config.yaml` and load it with the Settings class above.

### Expected Result

Settings loaded from YAML with full hierarchy preserved.

---

## D. Common Stumbling Blocks

### Mistake #1: YAML indentation errors

**Problem:** YAML is indent-sensitive
**Fix:** Use 2 or 4 spaces consistently, never tabs

---

## ðŸŽ¯ Key Takeaways

âœ… **YAML** for hierarchical configuration  
âœ… **PyYAML** library for parsing  
âœ… **Indentation matters** in YAML  
âœ… **Supports lists and nested objects**  

---

## What's Next?

Next: **JSON Configuration Files**!

**Ready to continue?** ðŸš€
